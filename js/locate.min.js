function getLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(showPosition):x.innerHTML="Geolocation is not supported by this browser."}function traverseJson(e,o){for(var t=0;t<e.results[0].address_components.length;t++)for(var a=0;a<e.results[0].address_components[t].types.length;a++)if(e.results[0].address_components[t].types[a]==o)return e.results[0].address_components[t]}function showPosition(e){phone=decodeURIComponent(getUrlParameter("phone")),getUrlParameter("county")&&(county=decodeURIComponent(getUrlParameter("county")),adminLevel="administrative_area_level_2",locType="city",locExample="Streator, IL"),getUrlParameter("township")&&(county=decodeURIComponent(getUrlParameter("township")),adminLevel="administrative_area_level_3",locType="full address",locExample="912 N. Shabbona St., Streator IL"),aa=decodeURIComponent(getUrlParameter("aa")),county=county.split(","),lat=e.coords.latitude,log=e.coords.longitude;var o="https://maps.googleapis.com/maps/api/geocode/json?&key=AIzaSyCSXhvHQJlLixd41ZqI_IvOw9AcmNfAEbQ&latlng="+e.coords.latitude+","+e.coords.longitude;$.getJSON(o,function(e){towns=county;for(var o=traverseJson(e,adminLevel),t=-1;o.long_name!=towns[t];){if(t++,o.long_name==towns[t]){x.innerHTML='<p class="green"><i class="material-icons">thumb_up</i> Based on your current location in '+o.long_name+", <b>you are eligible for membership</b>. Please review all qualifications to determine if you fully qualify.</p>";break}if(t>towns.length){x.innerHTML='<p class="bluealert"><i class="material-icons">pause_circle_outline</i>We placed you in '+o.long_name+", based on your location. <br/><b>Lets try your current "+locType+'.</b> <input placeholder="i.e. '+locExample+'" id="zip" name="zip" type="text"/> <button id="getlocal" onclick="checkAgain(towns, aa, adminLevel, phone, lat, log)">Submit</button></p>';break}}})}function checkAgain(e,o,t,a){var n=document.getElementById("zip").value,i="https://maps.googleapis.com/maps/api/geocode/json?&key=AIzaSyCSXhvHQJlLixd41ZqI_IvOw9AcmNfAEbQ&components=administrative_area:"+o+"&components=country:US&address="+n;$.getJSON(i,function(o){function n(e,o){if(o==google.maps.places.PlacesServiceStatus.OK){l=e.length;for(var t=0;t<e.length;t++){var a={placeId:e[t].place_id};d.getDetails(a,i)}}}function i(e,o){c++,o==google.maps.places.PlacesServiceStatus.OK&&(u+='<tr><td><a href="'+e.website+'">'+e.name+"</a></td><td>"+e.vicinity+"</td></tr>",c===l&&(p.innerHTML+=u+"</table>"))}for(var l,r=traverseJson(o,t),s={location:new google.maps.LatLng(o.results[0].geometry.location.lat,o.results[0].geometry.location.lng),rankBy:google.maps.places.RankBy.DISTANCE,name:"credit+union",keyword:"credit+union",types:["finance"]},c=0,u="<table>",m=-1;r.long_name!=e[m];){if(m++,r.long_name==e[m]){x.innerHTML='<p class="green"><i class="material-icons">thumb_up</i> Based on your current location in '+r.long_name+", <b>you are eligible for membership</b>. Please review all qualifications to determine if you fully qualify.</p>";break}if(m>e.length){x.innerHTML='<p class="redalert"><i class="material-icons">highlight_off</i> Sorry you are not eligible at this time, based on your current location in <b>'+r.long_name+"</b>. You may still qualify though, please see the full terms to learn more. If this location is wrong please call us at "+a+' to determine your membership status. <br/><br/><b>Do you qualify for these credit unions?</b><br/>Here are a few nearby credit unions you may be eligible to join.</p><div id="results"></div></p>';var p=document.getElementById("results"),d=new google.maps.places.PlacesService(p);d.nearbySearch(s,n);break}}})}var x=document.getElementById("demo");$("#getlocal").click(function(){$("#getlocal").hide()});var getUrlParameter=function(e){var o,t,a=decodeURIComponent(window.location.search.substring(1)),n=a.split("&");for(t=0;t<n.length;t++)if(o=n[t].split("="),o[0]===e)return void 0===o[1]?!0:o[1]};