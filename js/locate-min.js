function getLocation(){x.innerHTML='<div class="loader"><p>Locating you...</p><img src="images/245.gif"/></div>',navigator.geolocation?navigator.geolocation.getCurrentPosition(showPosition,error,{maximumAge:1e4,timeout:1e4,enableHighAccuracy:!0}):x.innerHTML="Geolocation is not supported by this browser."}function error(){x.innerHTML='<div class="white-alert">We couldn\'t seem to find you. Are you sure you accepted the location request? Maybe it took too long? Refresh this page to try again.</div>'}function traverseJson(e,o){for(var t=0;t<e.results[0].address_components.length;t++)for(var n=0;n<e.results[0].address_components[t].types.length;n++)if(e.results[0].address_components[t].types[n]==o)return e.results[0].address_components[t]}function showPosition(e){if(phone=decodeURIComponent(getUrlParameter("phone")),getUrlParameter("county")){county=decodeURIComponent(getUrlParameter("county")),adminLevel="administrative_area_level_2",locType="city";var o="Streator, IL";$.ajax({url:"http://ipinfo.io",dataType:"json",async:!1,success:function(e){o=e.city+", "+e.region}})}if(getUrlParameter("city")){county=decodeURIComponent(getUrlParameter("city")),adminLevel="locality",locType="city";var o="Streator, IL";$.ajax({url:"http://ipinfo.io",dataType:"json",async:!1,success:function(e){o=e.city+", "+e.region}})}getUrlParameter("township")&&(county=decodeURIComponent(getUrlParameter("township")),adminLevel="administrative_area_level_3",locType="full address",o="912 N. Shabbona St., Streator IL"),aa=decodeURIComponent(getUrlParameter("aa")),country=decodeURIComponent(getUrlParameter("country")),"undefined"===aa&&(aa=""),"undefined"===country&&(country=""),county=county.split(","),lat=e.coords.latitude,log=e.coords.longitude;var t="https://maps.googleapis.com/maps/api/geocode/json?&key=AIzaSyCSXhvHQJlLixd41ZqI_IvOw9AcmNfAEbQ&latlng="+e.coords.latitude+","+e.coords.longitude;$.getJSON(t,function(e){towns=county;for(var t=traverseJson(e,adminLevel),n=-1;t.long_name!=towns[n];){if(n++,t.long_name==towns[n]){x.innerHTML='<p class="green"><i class="material-icons">thumb_up</i> Based on your current location in '+t.long_name+", <b>you are eligible for membership</b>. Please review all qualifications to determine if you fully qualify.</p>";break}if(n>towns.length){x.innerHTML='<p class="bluealert"><i class="material-icons">pause_circle_outline</i>We placed you in '+t.long_name+", based on your location. <br/><b>Lets try your current "+locType+'.</b> <input value="'+o+'" placeholder="i.e. '+o+'" id="zip" name="zip" type="text"/> <button id="getlocal" onclick="checkAgain(towns, aa, adminLevel, phone, lat, log, country)">Submit</button></p>';break}}})}function checkAgain(e,o,t,n,a,i,r){var l=document.getElementById("zip").value,s="https://maps.googleapis.com/maps/api/geocode/json?&key=AIzaSyCSXhvHQJlLixd41ZqI_IvOw9AcmNfAEbQ&components=administrative_area:"+o+"&components=country:"+r+"&address="+l;$.getJSON(s,function(o){function a(e,o){if(o==google.maps.places.PlacesServiceStatus.OK){r=e.length;for(var t=0;t<e.length;t++){var n={placeId:e[t].place_id};g.getDetails(n,i)}}}function i(e,o){c++,o==google.maps.places.PlacesServiceStatus.OK&&(u+='<tr><td><a href="'+e.website+'">'+e.name+"</a></td><td>"+e.vicinity+"</td></tr>",c===r&&(m.innerHTML+=u+"</table>"))}for(var r,l=traverseJson(o,t),s={location:new google.maps.LatLng(o.results[0].geometry.location.lat,o.results[0].geometry.location.lng),rankBy:google.maps.places.RankBy.DISTANCE,name:"credit+union",keyword:"credit+union",types:["finance"]},c=0,u="<table>",d=-1;l.long_name!=e[d];){if(d++,l.long_name==e[d]){x.innerHTML='<p class="green"><i class="material-icons">thumb_up</i> Based on your current location in '+l.long_name+", <b>you are eligible for membership</b>. Please review all qualifications to determine if you fully qualify.</p>";break}if(d>e.length){x.innerHTML='<p class="redalert"><i class="material-icons">highlight_off</i> Sorry you are not eligible at this time, based on your current location in <b>'+l.long_name+"</b>. You may still qualify though, please see the full terms to learn more. If this location is wrong please call us at "+n+' to determine your membership status. <br/><br/><b>Do you qualify for these credit unions?</b><br/>Here are a few nearby credit unions you may be eligible to join.</p><div id="results"></div></p>';var m=document.getElementById("results"),g=new google.maps.places.PlacesService(m);g.nearbySearch(s,a);break}}})}var x=document.getElementById("demo");$("#getlocal").click(function(){$("#getlocal").hide()});var getUrlParameter=function(e){var o,t,n=decodeURIComponent(window.location.search.substring(1)),a=n.split("&");for(t=0;t<a.length;t++)if(o=a[t].split("="),o[0]===e)return void 0===o[1]?!0:o[1]};