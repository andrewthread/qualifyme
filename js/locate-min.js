function error(){x.innerHTML='<div class="white-alert">We couldn\'t seem to find you. Are you sure you accepted the location request? Maybe it took too long? Refresh this page to try again.</div>'}function getLocation(){x.innerHTML='<div class="loader"><p>Locating you...</p><img src="images/245.gif"/></div>',navigator.geolocation?navigator.geolocation.getCurrentPosition(showPosition,error,{maximumAge:1e4,timeout:1e4,enableHighAccuracy:!0}):x.innerHTML="Geolocation is not supported by this browser."}function traverseJson(e,o){for(var t=0;t<e.results[0].address_components.length;t++)for(var a=0;a<e.results[0].address_components[t].types.length;a++)if(e.results[0].address_components[t].types[a]===o){return e.results[0].address_components[t];break}}function showPosition(e){phone=decodeURIComponent(getUrlParameter("phone")),getUrlParameter("county")&&(county=decodeURIComponent(getUrlParameter("county")),adminLevel="administrative_area_level_2",locType="city",locExample="Streator, IL",$.ajax({url:"http://ipinfo.io",dataType:"json",async:!1,success:function(e){locExample=e.city+", "+e.region}})),getUrlParameter("city")&&(county=decodeURIComponent(getUrlParameter("city")),adminLevel="locality",locType="city",locExample="Streator, IL",$.ajax({url:"http://ipinfo.io",dataType:"json",async:!1,success:function(e){locExample=e.city+", "+e.region}})),getUrlParameter("township")&&(county=decodeURIComponent(getUrlParameter("township")),adminLevel="administrative_area_level_3",locType="full address",locExample="912 N. Shabbona St., Streator IL"),aa=decodeURIComponent(getUrlParameter("aa")),country=decodeURIComponent(getUrlParameter("country")),"undefined"===aa&&(aa=""),"undefined"===country&&(country=""),county=county.split(","),lat=e.coords.latitude,log=e.coords.longitude;var o="https://maps.googleapis.com/maps/api/geocode/json?&key=AIzaSyCSXhvHQJlLixd41ZqI_IvOw9AcmNfAEbQ&latlng="+e.coords.latitude+","+e.coords.longitude;$.getJSON(o,function(e){towns=county;for(var o=traverseJson(e,adminLevel),t=-1;o.long_name!==towns[t];){if(t++,o.long_name===towns[t]){x.innerHTML='<p class="green"><i class="material-icons">thumb_up</i> Based on your current location in '+o.long_name+", <b>you are eligible for membership</b>. Please review all qualifications to determine if you fully qualify.</p>";break}if(t>towns.length){var a="url('https://maps.googleapis.com/maps/api/staticmap?center="+o.long_name+"&size=640x640&scale=2&maptype=terrain&key=AIzaSyCSXhvHQJlLixd41ZqI_IvOw9AcmNfAEbQ')";$("body").css("background-image",a),x.innerHTML='<p class="bluealert"><i class="material-icons">pause_circle_outline</i>We placed you in '+o.long_name+", based on your location. <br/><b>Lets try your current "+locType+'.</b> <input value="'+locExample+'" placeholder="i.e. '+locExample+'" id="zip" name="zip" type="text"/> <button id="getlocal" onclick="checkAgain(towns, aa, adminLevel, phone, lat, log, country)">Submit</button></p>';break}}})}function checkAgain(e,o,t,a,n,i,r){var l=document.getElementById("zip").value,s="https://maps.googleapis.com/maps/api/geocode/json?&key=AIzaSyCSXhvHQJlLixd41ZqI_IvOw9AcmNfAEbQ&components=administrative_area:"+o+"&components=country:"+r+"&address="+l;$.getJSON(s,function(n){function i(e,o){if(o===google.maps.places.PlacesServiceStatus.OK){c=e.length;for(var t=0;t<e.length;t++){var a={placeId:e[t].place_id};y.getDetails(a,r)}}}function r(e,o){u++,o===google.maps.places.PlacesServiceStatus.OK&&(m+='<tr><td><a href="'+e.website+'">'+e.name+"</a></td><td>"+e.vicinity+"</td></tr>",u===c&&(g.innerHTML+=m+"</table>"))}for(var l=traverseJson(n,t),s={location:new google.maps.LatLng(n.results[0].geometry.location.lat,n.results[0].geometry.location.lng),rankBy:google.maps.places.RankBy.DISTANCE,name:"credit+union",keyword:"credit+union",types:["finance"]},c,u=0,m="<table>",p=-1;l.long_name!==e[p];){if(p++,l.long_name===e[p]){var d="url('https://maps.googleapis.com/maps/api/staticmap?center="+l.long_name+","+o+"&size=640x640&scale=2&maptype=terrain&key=AIzaSyCSXhvHQJlLixd41ZqI_IvOw9AcmNfAEbQ')";$("body").css("background-image",d),x.innerHTML='<p class="green"><i class="material-icons">thumb_up</i> Based on your current location in '+l.long_name+", <b>you are eligible for membership</b>. Please review all qualifications to determine if you fully qualify.</p>";break}if(p>e.length){x.innerHTML='<p class="redalert"><i class="material-icons">highlight_off</i> Sorry you are not eligible at this time, based on your current location in <b>'+l.long_name+"</b>. You may still qualify though, please see the full terms to learn more. If this location is wrong please call us at "+a+' to determine your membership status. <br/><br/><b>Do you qualify for these credit unions?</b><br/>Here are a few nearby credit unions you may be eligible to join.</p><div id="results"></div></p>';var g=document.getElementById("results"),y=new google.maps.places.PlacesService(g);y.nearbySearch(s,i);break}}})}var x=document.getElementById("demo");$("#getlocal").click(function(){$("#getlocal").hide()});var getUrlParameter=function e(o){var t=decodeURIComponent(window.location.search.substring(1)),a=t.split("&"),n,i;for(i=0;i<a.length;i++)if(n=a[i].split("="),n[0]===o)return void 0===n[1]?!0:n[1]};